const BufferParser = require('../index');

test('stops at null bytes', () => {
    const buffer = Buffer.from([0x68, 0x00, 0x65, 0x00, 0x6C, 0x00, 0x6C, 0x00, 0x6F, 0x00, 0x00, 0x00, 0x77, 0x00, 0x6F, 0x00, 0x72, 0x00, 0x6C, 0x00, 0x64, 0x00]);
    const parser = new BufferParser(buffer);

    expect(parser.wstring0()).toBe('hello');
    expect(parser.wstring0()).toBe('world');
});

test('stops at end of file', () => {
    const buffer = Buffer.from([0x68, 0x00, 0x65, 0x00, 0x6C, 0x00, 0x6C, 0x00, 0x6F, 0x00, 0x00, 0x00, 0x77, 0x00, 0x6F, 0x00, 0x72, 0x00, 0x6C, 0x00, 0x64, 0x00]);
    const parser = new BufferParser(buffer);

    parser.seek(12);
    expect(parser.wstring0()).toBe('world');
});
